"use strict";$(function(){var i="selected",s=$("#post-menu-button"),e=$("#post-menu"),n=$("#menu-roots"),l=$("#menu-categories"),d=$("#menu-posts"),t=$("#post-description"),o=util.setting.menuCategory;function a(t,a){var n=s.find(".material-icons.expand_less"),o=s.find(".material-icons.expand_more");t&&t.stopPropagation(),void 0===a&&(a=s.hasClass(i)),a?(s.removeClass(i),e.hide(),n.hide(),o.show()):(s.addClass(i),e.show(),n.show(),o.hide())}function p(t,a,n,o){t.find("li").removeClass(i),n(o),a.addClass(i),util.setting.menuCategory=o}function r(t){var a=t[0];if(null!==a){var n=postMenuData.category[a];l.empty(),null==t[1]&&(t[1]=n[0].title);for(var o=0;o<n.length;o++){var s=$("<li>").text(n[o].title);l.append(s),n[o].title==t[1]&&(s.addClass(i),u(t))}}}function u(t){var a=t[0];if(null!==a){var n=postMenuData.category[a];d.empty();for(var o=0;o<n.length;o++)if(n[o].title==t[1])for(var s=n[o].posts,i=0;i<s.length;i++){var e=postMenuData.post[s[i]],l=e.title;if(e.part&&i<s.length-1&&l==postMenuData.post[s[i+1]].title){for(var p=$("<ol>");i<s.length&&postMenuData.post[s[i]].title==l;){var r=void 0===(e=postMenuData.post[s[i]]).part?"":e.part,u=void 0===e.subTitle?"":e.subTitle;p.prepend($("<li>").addClass("post").attr("value",r).html(u).data("description",e.description).data("slug",e.slug)),i++}i--,e=postMenuData.post[s[i]],d.append($("<li>").addClass("series").html('<span class="mode-icon '+e.icon+'"></span>'+e.title).append(p))}else e.part&&(l+=": "+e.subTitle),d.append($("<li>").addClass("post").html('<span class="mode-icon '+e.icon+'"></span>'+l).data("description",e.description).data("slug",e.slug))}}}null==o&&(o=["When",null]),s.one("click",function(){if(null!==o)for(var t in postMenuData.category){var a=$("<li>").text(t);n.append(a),t==o[0]&&(a.addClass(i),r(o))}}).click(a),n.on("click","li",function(t){t.stopPropagation();var a=$(this);o=[a.text(),null],p(n,a,r,o)}),l.on("click","li",function(t){if(t.stopPropagation(),null!==o){var a=$(this);o[1]=a.text(),p(l,a,u,o)}}),d.on("click","li.post",function(){window.location.href="/"+$(this).data("slug"),a()}).on("mouseover","li.post",function(){t.html($(this).data("description"))}).on("mouseout",function(){t.empty()}),$("html").click(function(t){a(t,!0)})});
//# sourceMappingURL=/js/maps/post-menu.js.map
